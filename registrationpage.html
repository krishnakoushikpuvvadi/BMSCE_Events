<!DOCTYPE html>
<html>
<head>
  <title>Registration page</title>
  <link rel="stylesheet" href="css/registration.css">
</head>

<body style="background-image:url(images/new1.jpeg); background-repeat:no-repeat; background-size:cover;">
  <br>
  <br>
  <center>

    <form method="post" action="/Registration">
      <table>
        <tr>
          <td><label for="name">Name:</label></td>
          <td><input type="text" name="name" id="name" placeholder="Your name" required><br><br></td>
        </tr>

        <tr>
          <td><label for="USN">USN:</label></td>
          <td><input type="text" name="USN" id="USN" placeholder="USN" required><br><br></td>
        </tr>

        <tr>
          <td><label for="email">Email:</label></td>
          <td><input type="email" name="email" id="email" placeholder="Your email" required><br><br></td>
        </tr>

        <tr>
          <td><label for="phoneNumber">Phone Number:</label></td>
          <td><input type="text" name="phoneNumber" id="phoneNumber" placeholder="Your phoneNumber" required><br><br></td>
        </tr>
        <tr>
          <td><label for="language">Branch:</label></td>
          <td>
            <select name="Branch" id="branch" required>
              <option value="" selected>Select</option>
              <option value="CSE">CSE</option>
              <option value="ECE">ECE</option>
              <option value="ISE">ISE</option>
              <option value="CV">CV</option>
              <option value="ME">ME</option>
              <option value="BT">BT</option>
              <option value="AIML">AIML</option>
            </select><br><br>
          </td>
        </tr>

        <tr>
          <td><label for="psw">Password</label></td>
          <td>
            <div class="password-container">
              <input type="password" id="psw" name="pwd"
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                required><br><br>
              <div id="message">
                <h3>Password must contain the following:</h3>
                <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
                <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
                <p id="number" class="invalid">A <b>number</b></p>
                <p id="length" class="invalid">Minimum <b>8 characters</b></p>
              </div>
            </div>
          </td>
        </tr>
      </table>
      <br>
      <input type="submit" value="Submit" />
    </form>
  </center>

  <script>
    var myInput = document.getElementById("psw");
    var letter = document.getElementById("letter");
    var capital = document.getElementById("capital");
    var number = document.getElementById("number");
    var length = document.getElementById("length");


    var usnInput = document.getElementById("USN");

usnInput.addEventListener("input", function () {
  var usnPattern = /^[1-9][A-Z]{2}\d{2}[A-Z]{2}\d{3}$/;

  if (usnPattern.test(usnInput.value)) {
    usnInput.setCustomValidity("");
  } else {
    usnInput.setCustomValidity("Enter a valid USN (e.g., 1BM21CS264)");
  }
});


var emailInput = document.getElementById("email");

emailInput.addEventListener("input", function () {
  var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

  if (emailPattern.test(emailInput.value)) {
    emailInput.setCustomValidity("");
  } else {
    emailInput.setCustomValidity("Enter a valid email address");
  }
});

    myInput.onfocus = function () {
      document.getElementById("message").style.display = "block";
    }


    myInput.onblur = function () {
      document.getElementById("message").style.display = "none";
    }


    myInput.onkeyup = function () {

      var lowerCaseLetters = /[a-z]/g;
      if (myInput.value.match(lowerCaseLetters)) {
        letter.classList.remove("invalid");
        letter.classList.add("valid");
      } else {
        letter.classList.remove("valid");
        letter.classList.add("invalid");
      }


      var upperCaseLetters = /[A-Z]/g;
      if (myInput.value.match(upperCaseLetters)) {
        capital.classList.remove("invalid");
        capital.classList.add("valid");
      } else {
        capital.classList.remove("valid");
        capital.classList.add("invalid");
      }


      var numbers = /[0-9]/g;
      if (myInput.value.match(numbers)) {
        number.classList.remove("invalid");
        number.classList.add("valid");
      } else {
        number.classList.remove("valid");
        number.classList.add("invalid");
      }


      if (myInput.value.length >= 8) {
        length.classList.remove("invalid");
        length.classList.add("valid");
      } else {
        length.classList.remove("valid");
        length.classList.add("invalid");
      }
    }
  </script>
</body>
</html>